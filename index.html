<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alumni Pensionato Bertoni – Milano</title>
  <meta name="description" content="Directory degli studenti e alumni del Pensionato Universitario Bertoni (Milano): profili, corsi di studio/lavoro e contatti, con ricerca rapida." />
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- CSS interno: definisce colori, layout e stili -->
  <style>
  :root{
  /* Apple-style minimal palette */
  --bg: #f5f5f7;          /* light gray background */
  --panel: #ffffff;       /* white panels/cards */
  --text: #1d1d1f;        /* main text, almost black */
  --mute: #6e6e73;        /* muted gray text */

  --brand: #0071e3;       /* Apple blue (links, buttons) */
  --brand-2: #2997ff;     /* lighter hover blue */

  --ring: rgba(0,113,227,.35);  /* blue focus ring */
  --radius: 12px;         /* Apple uses softer corners */
  --shadow: 0 2px 12px rgba(0,0,0,.08); /* subtle shadow */
}


    *{box-sizing:border-box}
    html,body{height:100%}
     body{
          margin:0; font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          background: var(--bg);
          color: var(--text);
          }

    a{color:inherit; text-decoration:none}
    .container{width:min(1180px, 92%); margin-inline:auto}

    /* NAVBAR */
    .nav{position:sticky; top:0; z-index:50;background:#ffffff;border-bottom:1px solid rgba(0,0,0,.08);box-shadow: 0 1px 2px rgba(0,0,0,.04);}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
    .logo{width:28px; height:28px; border-radius:8px; background:
      radial-gradient(120% 120% at 100% 0%, var(--brand) 0 40%, transparent 41%),
      radial-gradient(120% 120% at 0% 100%, var(--brand-2) 0 40%, transparent 41%),
      linear-gradient(135deg, #1c2333, #0f1422); box-shadow: inset 0 0 0 1px rgba(255,255,255,.15)}
    .nav a.link{ color: var(--mute); }
    .nav a.link:hover{ color: var(--text); background:rgba(0,0,0,.04); }
    .menu{display:flex; gap:6px}
    .btn{border:1px solid rgba(0,0,0,.1);background:#ffffff;color:var(--text);border-radius: 980px; /* Apple pill shape */padding: 10px 20px;}
    .btn.primary{background: var(--brand);color:#fff;border:none;}
    .btn.primary:hover{ background: var(--brand-2); }


    /* HEADER E RICERCA */
    header{padding:54px 0 24px}
    h1{font-size: clamp(34px, 6vw, 54px); line-height:1.08; margin:6px 0 10px}
    .subtitle{color:var(--mute); font-size: clamp(16px, 2.2vw, 19px)}

    .searchbar{margin-top:22px}
    .search{display:flex; gap:10px; align-items:center}
    .search input[type="search"], .search select{
      flex:1; min-width:0; padding:12px 14px; border-radius:14px; border:1px solid rgba(255,255,255,.16); background:#0f1422; color:var(--text)
    }
    .search input[type="search"]:focus, .search select:focus{outline:2px solid var(--ring); border-color:transparent}

    /* GRID per le card profilo */
    .grid{display:grid; grid-template-columns:repeat(1, 1fr); gap:16px}
    @media (min-width: 560px){ .grid{grid-template-columns:repeat(2, 1fr)} }
    @media (min-width: 900px){ .grid{grid-template-columns:repeat(3, 1fr)} }
    @media (min-width: 1160px){ .grid{grid-template-columns:repeat(4, 1fr)} }

    /* CARD profilo */
  .card{background: var(--panel);border:1px solid rgba(0,0,0,.08);border-radius: var(--radius);box-shadow: var(--shadow);}
  .card .inner{padding:18px}
  .avatar{ background:#f5f5f7; border:1px solid rgba(0,0,0,.06); }
  .avatar img{width:100%; height:100%; object-fit:cover}



    /* Info nella card */
    .name{display:flex; align-items:center; justify-content:space-between; gap:8px; margin:12px 0 6px}
    .name b{font-size:18px}
    .meta{ color: var(--mute); }
    .tag{border:1px solid rgba(0,0,0,.08);background:#f5f5f7;color:#1d1d1f;}
    .actions{display:flex; align-items:center; gap:10px; margin-top:12px}
    .icon{width:18px; height:18px; display:inline-block}
    .icon svg{width:100%; height:100%}
    .link-quiet{color:var(--mute)}
    .link-quiet:hover{color:var(--text)}

    /* Counter dei profili */
    .count{color:var(--mute); margin:16px 0 8px}

    /* Form Aggiungi profilo */
    .profile-form input,
    .profile-form select{border:1px solid rgba(0,0,0,.2);background:#ffffff;color:var(--text); border-radius:8px;}
    .profile-form input:focus,
    .profile-form select:focus{outline:2px solid var(--brand);border-color:transparent;}

    .grid-2{display:grid; grid-template-columns:1fr; gap:12px}
    @media(min-width:720px){ .grid-2{grid-template-columns:1fr 1fr} }

    /* FOOTER */
    footer{padding:28px 0 60px; color:var(--mute); border-top:1px solid rgba(255,255,255,.08); margin-top:40px}
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav" aria-label="Principale">
    <div class="container nav-inner">
      <a class="brand" href="#">
        <img class="logo" src="bertoni.png" alt="" aria-hidden="true" width="28" height="28" style="border-radius:8px;">
        <span>Pensionato Bertoni · Alumni</span>
      </a>
      <div class="menu" role="menubar">
        <!-- Link rapidi per navigazione -->
        <a class="link" href="#alumni">Alumni</a>
        <a class="link" href="#generazioni">Generazioni</a>
        <a class="link" href="#aggiungi">Aggiungi profilo</a>
        <a class="link" href="#contatti">Contatti</a>
      </div>
      <a class="btn primary" href="#alumni">Cerca profili</a>
    </div>
  </nav>

  <!-- HEADER: titolo + barra di ricerca -->
  <header class="container">
    <h1>Alumni Pensionato Bertoni</h1>
    <p class="subtitle">Directory interna degli studenti e laureati del Pensionato Universitario Bertoni (Milano). Cerca per nome, corso di studi, lavoro, competenze o generazione per costruire il tuo network e trovare informazioni utili.</p>

    <div id="alumni" class="searchbar">
      <form id="searchForm" class="search" role="search" aria-label="Ricerca profili">
        <input id="q" name="q" type="search" placeholder="Cerca per nome, corso (es. Ingegneria), ruolo (es. Data Engineer), skill (es. Python), azienda o anno" autocomplete="off" />
        <select id="gen" name="gen" aria-label="Filtra per generazione">
          <option value="">Tutte le generazioni</option>
          <option value="2025">Generazione 2025</option>
          <option value="2024">Generazione 2024</option>
          <option value="2023">Generazione 2023</option>
          <option value="2022">Generazione 2022</option>
          <option value="ex">Ex residenti</option>
        </select>
        <button class="btn" type="submit">Filtra</button>
      </form>
      <!-- Qui mostra il numero di profili filtrati -->
      <p id="count" class="count" aria-live="polite"></p>
    </div>
  </header>

  <!-- MAIN con griglia profili e sezioni -->
  <main class="container">
    <!-- Griglia profili -->
    <section aria-label="Elenco profili">
      <div id="grid" class="grid" role="list"></div>
    </section>

    <!-- Sezione Generazioni -->
    <section id="generazioni" style="margin-top:42px">
      <h2>Generazioni</h2>
      <p class="subtitle">Raggruppa e scopri studenti per anno di ingresso/uscita. (Sezione espandibile: timeline, foto di gruppo, eventi.)</p>
    </section>

    <!-- Form per aggiungere un nuovo profilo -->
    <section id="aggiungi" style="margin-top:42px">
      <h2>Aggiungi il tuo profilo</h2>
      <p class="subtitle">Compila i campi: comparirai subito nell’elenco (demo: i dati non sono salvati su server finché non attiviamo un backend).</p>
      <div class="card"><div class="inner">
        <form id="addForm" class="profile-form">
          <div class="grid-2">
            <label>Nome<input id="nome" name="nome" required placeholder="Nome Cognome"></label>
            <label>Anni di permanenza<input id="anni" name="anni" placeholder="es. 2022–oggi"></label>
            <label>Piano<select id="piano" name="piano"><option value="">—</option><option>1</option><option>2</option><option>3</option><option>4</option></select></label>
            <label>Corso di studi<input id="corso" name="corso" placeholder="Ingegneria Meccanica (PoliMi)"></label>
            <label>Ruolo/Lavoro<input id="ruolo" name="ruolo" placeholder="es. Studente / Motorcycle Factory"></label>
            <label>Azienda/Team<input id="azienda" name="azienda" placeholder="es. PoliMi Motorcycle Factory"></label>
            <label>Skill (separate da virgola)<input id="skills" name="skills" placeholder="Python, CAD, Teamwork"></label>
            <label>Email<input id="email" name="email" type="email" placeholder="nome@esempio.com"></label>
            <label>LinkedIn<input id="linkedin" name="linkedin" type="url" placeholder="https://www.linkedin.com/in/..."></label>
            <label>Foto (URL)<input id="fotoUrl" name="fotoUrl" type="url" placeholder="https://.../foto.jpg"></label>
            <label>Foto (file)<input id="fotoFile" name="fotoFile" type="file" accept="image/*"></label>
          </div>
          <button class="btn primary" type="submit">Aggiungi profilo</button>
          <small id="addNote" class="meta"></small>
        </form>
      </div></div>
    </section>

    <!-- Contatti -->
    <section id="contatti" style="margin-top:42px">
      <h2>Contatti</h2>
      <p class="subtitle">Pagina interna non ufficiale a supporto della community. Per richieste di correzione profilo o inserimento, contatta l'amministratore.</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <small>© <span id="year"></span> Alumni Pensionato Bertoni · Milano.</small>
      <small><a href="#">Privacy</a> · <a href="#">Termini</a></small>
    </div>
  </footer>

  <!-- SCRIPT JAVASCRIPT -->
  <script>
    // Mostra anno corrente nel footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Dataset demo (profili iniziali)
    const ALUMNI = [
      { id:1, nome:"Francesco Sala", corso:"Ingegneria Meccanica (PoliMi)", ruolo:"Studente / Motorcycle Factory", azienda:"PoliMi Motorcycle Factory", anni:"2022–oggi", piano:2, skills:["Motorsport","Teamwork","Design"], email:"francescosala2002@gmail.com", foto:"Foto.jpg" },
      { id:2, nome:"Giulia Bianchi", corso:"Architettura", ruolo:"Tirocinante BIM", azienda:"Studio ABC", anni:"2021–2024", piano:2, skills:["Revit","BIM","Render"], email:"giulia@example.com", foto:"" },
      { id:3, nome:"Luca Verdi", corso:"Informatica", ruolo:"Data Engineer", azienda:"FinTech S.p.A.", anni:"2020–2023", piano:4, skills:["Python","SQL","ETL"], email:"luca@example.com", foto:"" },
      { id:4, nome:"Sara Neri", corso:"Design del Prodotto", ruolo:"UX/UI Designer", azienda:"Agenzia Pixel", anni:"2023–", piano:1, skills:["Figma","UX Research","Prototyping"], email:"sara@example.com", foto:"" }
    ];

    // Riferimenti agli elementi DOM
    const grid = document.getElementById('grid');
    const count = document.getElementById('count');

    // Trasforma lista di skill in badge <span>
    function tagify(list){
      return list.map(t=>`<span class="tag">${t}</span>`).join('');
    }

    // Funzione che crea l'HTML per una card profilo
    function card(p){
      const placeholder = `<div class=\"avatar\">Foto</div>`;
      const avatar = p.foto ? `<div class="avatar"><img src="${p.foto}" alt="Foto di ${p.nome}"/></div>` : placeholder;
      const li = p.linkedin ? `<a class="link-quiet" href="${p.linkedin}" target="_blank" rel="noopener" title="Profilo LinkedIn di ${p.nome}">
        <span class="icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8h4V23h-4V8zM8 8h3.8v2.05h.05c.53-1 1.83-2.05 3.77-2.05 4.03 0 4.78 2.65 4.78 6.1V23h-4v-7.1c0-1.7-.03-3.9-2.38-3.9-2.38 0-2.75 1.86-2.75 3.78V23h-4V8z"/></svg>
        </span> LinkedIn</a>` : '';
      return `
        <article class="card" role="listitem">
          <div class="inner">
            ${avatar}
            <div class="name"><b>${p.nome}</b><span class="tag">${p.anni} · ${p.piano}° piano</span></div>
            <p class="meta">${p.corso}</p>
            <p class="meta">${p.ruolo}${p.azienda? ' · ' + p.azienda : ''}</p>
            <div class="tags">${tagify(p.skills||[])}</div>
            <div class="actions">${li}</div>
          </div>
        </article>`;
    }

    function render(list){
      grid.innerHTML = list.map(card).join('');
      count.textContent = `${list.length} profili mostrati`;
    }

    function normalize(s){ return (s||'').toString().toLowerCase(); }
    function matchQuery(p, q){
      if(!q) return true;
      const hay = [p.nome, p.corso, p.ruolo, p.azienda, (p.skills||[]).join(' '), p.anni, p.generazione].map(normalize).join(' ');
      return hay.includes(normalize(q));
    }

    function applyFilter(evt){
      if(evt) evt.preventDefault();
      const q = document.getElementById('q').value.trim();
      const gen = document.getElementById('gen').value;
      const filtered = ALUMNI.filter(p => matchQuery(p, q) && (gen ? String(p.generazione)===String(gen) : true));
      render(filtered);
    }

    document.getElementById('searchForm').addEventListener('submit', applyFilter);
    document.getElementById('q').addEventListener('input', applyFilter);
    document.getElementById('gen').addEventListener('change', applyFilter);

    const addForm = document.getElementById('addForm');
    if (addForm) {
      function readFileAsDataURL(file){
        return new Promise((resolve,reject)=>{
          const fr = new FileReader();
          fr.onload = () => resolve(fr.result);
          fr.onerror = reject;
          fr.readAsDataURL(file);
        });
      }
      addForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const f = e.target;
        const skills = (f.skills.value||'').split(',').map(s=>s.trim()).filter(Boolean);
        let fotoVal = f.fotoUrl.value.trim();
        if (f.fotoFile.files && f.fotoFile.files[0]) {
          try { fotoVal = await readFileAsDataURL(f.fotoFile.files[0]); } catch {}
        }
        const nextId = (ALUMNI.reduce((m,p)=>Math.max(m,p.id||0),0)+1) || 1;
        const prof = {
          id: nextId,
          nome: f.nome.value.trim(),
          corso: f.corso.value.trim(),
          ruolo: f.ruolo.value.trim(),
          azienda: f.azienda.value.trim(),
          anni: f.anni.value.trim(),
          piano: parseInt(f.piano.value,10) || '',
          skills,
          email: f.email.value.trim(),
          linkedin: f.linkedin.value.trim(),
          foto: fotoVal
        };
        if(!prof.nome){ f.nome.focus(); return; }
        ALUMNI.push(prof);
        applyFilter();
        f.reset();
        document.getElementById('addNote').textContent = 'Profilo aggiunto! (demo: non salvato su server)';
      });
    }

    render(ALUMNI);
  </script>
</body>
</html>
